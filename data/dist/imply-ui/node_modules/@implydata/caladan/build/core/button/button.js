"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var classNames=require("classnames");var React=require("react");var svg_icon_1=require("../svg-icon/svg-icon");var tooltip_1=require("../tooltip/tooltip");var global_event_listener_1=require("../global-event-listener/global-event-listener");function getClasses(e,t){var n=e.title,s=e.svg,a=e.active,i=e.badge,r=e.tabIndex,o=e.loading,l=e.summarySvg,u=e.mini;var c=t.pending,m=t.summarized;var v={"icon-and-text":!!n&&!!s,"icon-only":!n&&!!s,active:!!a,"with-badge":i!==undefined,"no-focus":r===-1,pending:!!(c||o),"has-summary":l!=null,summarized:!!m,mini:!!u};if(v["icon-and-text"]&&m&&l===""){v["icon-and-text"]=false;v["icon-only"]=true;v["has-summary"]=true}return v}exports.getClasses=getClasses;var Button=function(e){tslib_1.__extends(t,e);function t(){var t=e.call(this)||this;t.mounted=false;t.onClick=function(e){var n=t.props,s=n.onClick,a=n.href;if(!s||a!=null)return;var i=s(e);if(!t.isPromise(i))return;var r=function(){if(!t.mounted)return;t.setState({pending:false})};i.then(r).catch(r);t.setState({pending:true})};t.onResize=function(){var e=t.state.summarized;var n=window.innerWidth<=1080;if(n!==e){t.setState({summarized:n})}};t.state={summarized:window.innerWidth<=1080};return t}t.prototype.componentDidMount=function(){this.mounted=true};t.prototype.componentWillUnmount=function(){this.mounted=false};t.prototype.isPromise=function(e){return e&&typeof e.then==="function"};t.prototype.render=function(){var e=this.props,t=e.loading,n=e.summarySvg,s=e.badge,a=e.title,i=e.type,r=e.className,o=e.svg,l=e.active,u=e.disabled,c=e.onMouseEnter,m=e.onMouseLeave,v=e.tabIndex,d=e.style,p=e.svgStyle,g=e.mini,f=e.tooltip,b=e.buttonRef,_=e.href;var h=this.state,y=h.pending,R=h.summarized;var E=!u;var x={type:"button",className:classNames("button",i,r,getClasses(this.props,this.state)),onClick:E?this.onClick:null,disabled:!E,onMouseEnter:c,onMouseLeave:m,tabIndex:v!=null&&E?v:0,style:d,ref:b};var z=React.createElement("button",tslib_1.__assign({},x),o?React.createElement(svg_icon_1.SvgIcon,{svg:o,style:p}):null,a,s?React.createElement("span",{className:"badge"},s):null,n?React.createElement(svg_icon_1.SvgIcon,{className:"summary-svg",svg:n,style:p}):null,this.props.children,n!=null&&a?React.createElement(global_event_listener_1.GlobalEventListener,{resize:this.onResize}):null);if(_!=null)z=React.createElement("a",{className:"button-wrapper-link",href:_},z);if(n!=null&&a!=null&&R){return React.createElement(tooltip_1.Tooltip,{label:f?f:a},z)}if(f){return React.createElement(tooltip_1.Tooltip,{label:f},z)}return z};return t}(React.Component);exports.Button=Button;