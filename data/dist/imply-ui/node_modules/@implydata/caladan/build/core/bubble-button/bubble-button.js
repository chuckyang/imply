"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var classNames=require("classnames");var React=require("react");var Icons=require("@implydata/little-pictures");var button_1=require("../button/button");var tooltip_1=require("../tooltip/tooltip");var bubble_menu_1=require("../bubble-menu/bubble-menu");var svg_icon_1=require("../svg-icon/svg-icon");var BubbleButton=function(e){tslib_1.__extends(t,e);function t(){var t=e.call(this)||this;t.onClose=function(){t.setState({menuOpen:false})};t.state={};return t}t.prototype.toggleMenu=function(){var e=this.state.menuOpen;this.setState({menuOpen:!e})};t.prototype.onItemClick=function(e,t){this.setState({menuOpen:false},function(){return e.onClick?e.onClick(t):null})};t.prototype.renderItem=function(e,t){var n=this;if(e==="-"){return React.createElement("li",{className:"separator",key:t})}var r={key:t,className:classNames("item",e.className),onClick:function(t){return n.onItemClick(e,t)}};return e.href?React.createElement("a",tslib_1.__assign({},e.additionalProps,r,{target:e.target,href:e.href}),e.label):React.createElement("li",tslib_1.__assign({},e.additionalProps,r),e.label)};t.prototype.renderMenu=function(){var e=this.props,t=e.items,n=e.renderMenu,r=e.insideId,s=e.className,a=e.menuOffset;var o=this.state.menuOpen;if(!o)return null;if(t){return React.createElement(bubble_menu_1.BubbleMenu,{className:classNames("button-menu v-padded",s),position:"bottom",openOn:this._button,insideId:r,onClose:this.onClose,offset:a},React.createElement("ul",{className:"bubble-list"},t.map(this.renderItem,this)))}else if(n){return n(this._button,this.onClose)}else{throw new Error("The BubbleButton should either have a menu or items to display")}};t.prototype.render=function(){var e=this;var t=this.props,n=t.items,r=t.insideId,s=t.showCaret,a=t.className,o=t.tooltip;var i=this.state.menuOpen;var l=React.createElement(button_1.Button,tslib_1.__assign({},this.props,{tooltip:undefined,className:classNames(a,"bubble-button",{"has-caret":s}),buttonRef:function(t){return e._button=t},onClick:function(){return e.toggleMenu()}}),this.renderMenu(),this.props.children,s?React.createElement(svg_icon_1.SvgIcon,{className:"caret",svg:Icons.DROPDOWN_CARET}):null);if(o){return React.createElement(tooltip_1.Tooltip,{label:o,disabled:i},l)}return l};return t}(React.Component);exports.BubbleButton=BubbleButton;