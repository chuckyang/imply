"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var path=require("path");var express=require("express");var bodyParser=require("body-parser");var queryRouter=require("./routes/query/query");var connectionRouter=require("./routes/connection/connection");var view_1=require("./view");function makeSqlServer(e){var r=this;if(e===void 0){e={}}var t=express.Router();t.use("/assets",express.static(path.join(__dirname,"../../build/public"),{redirect:false}));t.use("/assets",express.static(path.join(__dirname,"../../assets"),{redirect:false}));t.use(bodyParser.json({limit:"1mb"}));t.use("/query",queryRouter);t.use("/connection",connectionRouter);t.use("/",function(e,t,s){return tslib_1.__awaiter(r,void 0,void 0,function(){var r,s,i,o;return tslib_1.__generator(this,function(n){r=e.user,s=e.compass,i=e.mountPoint,o=e.assetsMountPoint;t.send(view_1.sqlLayout({version:e.version,title:"SQL",user:r,compass:s,assetsMountPoint:o==null?e.mountPoint:o,mountPoint:i}));return[2]})})});return t}exports.makeSqlServer=makeSqlServer;