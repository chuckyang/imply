"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var immutable_class_1=require("immutable-class");var plywood_1=require("plywood");var chronoshift_1=require("chronoshift");var DateInterval=function(t){tslib_1.__extends(e,t);function e(e){return t.call(this,e)||this}e.fromJS=function(t){return new e(t)};e.fromTimeRange=function(t){return e.fromJS({start:t.start,end:t.end})};e.prototype.isComplete=function(){return!!this.start&&!!this.end};e.prototype.contains=function(t,e){if(!this.isComplete())return false;var r=this.fix(e),n=r.start,i=r.end;return n<t&&t<i};e.prototype.toTimeRange=function(){if(!this.isComplete())throw new Error("Incomplete interval, cannot convert it to time range");var t=this.sort(),e=t.start,r=t.end;return plywood_1.TimeRange.fromJS({start:e,end:r,bounds:"[)"})};e.prototype.fix=function(t){if(!this.isComplete())return this;var r=this,n=r.start,i=r.end;if(n<i)return this;n=chronoshift_1.day.floor(n,t);i=chronoshift_1.day.ceil(i,t);if(n>i){return e.fromJS({start:chronoshift_1.day.shift(i,t,-1),end:chronoshift_1.day.shift(n,t,1)})}else{return e.fromJS({start:n,end:i})}};e.prototype.sort=function(){if(!this.isComplete())return this;var t=this,r=t.start,n=t.end;if(r>n)i=[n,r],r=i[0],n=i[1];return e.fromJS({start:r,end:n});var i};e.PROPERTIES=[{name:"start",type:"date",defaultValue:null},{name:"end",type:"date",defaultValue:null}];return e}(immutable_class_1.BaseImmutable);exports.DateInterval=DateInterval;immutable_class_1.BaseImmutable.finalize(DateInterval);