"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var beltful_1=require("@implydata/beltful");var immutable_class_1=require("immutable-class");var essence_1=require("../essence/essence");var DashboardTile=function(e){tslib_1.__extends(t,e);function t(t){var a=e.call(this,t)||this;a.title=a.title||beltful_1.StringUtils.makeTitle(name);return a}t.fromEssence=function(e,a){return new t({name:e,type:t.TYPE_VISUALIZATION,title:a.getTitle(),description:"",essence:a})};t.generateBlank=function(e){return new t({name:e,type:t.TYPE_BLANK,title:"New tile",description:"",essence:undefined})};t.fromJS=function(e,a){if(a===void 0){a={}}var n=a.dataCubes,i=a.visualizations;var l=e.type;if(!l){if(e.essence){l=t.TYPE_VISUALIZATION}else if(e.content){l=t.TYPE_MARKDOWN}else{l=t.TYPE_BLANK}}var s;if(e.essence){var u=e.essence;var r=null;if(n){var o=u.dataCube||e.dataCube;r=immutable_class_1.NamedArray.findByName(n,o)}if(!u.dataCube&&e.dataCube){u.dataCube=e.dataCube}s=essence_1.Essence.fromJS(u,{actualDataCube:r,visualizations:i})}return new t({name:e.name,type:l,title:e.title,description:e.description,position:e.position?beltful_1.Stage.fromJS(e.position):null,group:e.group,essence:s,titleHidden:e.titleHidden,content:e.content})};t.prototype.isReady=function(){return this.isBlank()||Boolean(this.essence.actualDataCube)};t.prototype.getDataCube=function(){return this.essence?this.essence.actualDataCube:null};t.prototype.makeDuplicate=function(e){var a=this.valueOf();a.name=e;delete a.position;return new t(a)};t.prototype.isBlank=function(){return this.getType()===t.TYPE_BLANK};t.prototype.isMarkdown=function(){return this.getType()===t.TYPE_MARKDOWN};t.prototype.isVisualization=function(){return this.getType()===t.TYPE_VISUALIZATION};t.TYPE_VISUALIZATION="visualization";t.TYPE_BLANK="blank";t.TYPE_MARKDOWN="markdown";t.TYPES=[t.TYPE_BLANK,t.TYPE_VISUALIZATION,t.TYPE_MARKDOWN];t.PROPERTIES=[{name:"name",validate:beltful_1.StringUtils.verifyUrlSafeName},{name:"type",possibleValues:t.TYPES},{name:"title",defaultValue:null},{name:"titleHidden",defaultValue:false},{name:"description",defaultValue:null},{name:"position",immutableClass:beltful_1.Stage,defaultValue:null},{name:"group",defaultValue:null},{name:"essence",immutableClass:essence_1.Essence,defaultValue:null},{name:"content",defaultValue:null}];return t}(immutable_class_1.BaseImmutable);exports.DashboardTile=DashboardTile;immutable_class_1.BaseImmutable.finalize(DashboardTile);