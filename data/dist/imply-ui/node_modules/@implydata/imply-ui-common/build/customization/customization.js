"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var chronoshift_1=require("chronoshift");var immutable_class_1=require("immutable-class");var owasp=require("owasp-password-strength-test");var theme_1=require("../theme/theme");var Customization=function(_super){tslib_1.__extends(Customization,_super);function Customization(parameters){return _super.call(this,parameters)||this}Customization.fromJS=function(parameters){if(!parameters.theme&&parameters.headerBackground){parameters.theme=theme_1.Theme.DEFAULT.changeMainColor(parameters.headerBackground)}if(!parameters.menuLogoSvg&&parameters.customLogoSvg){parameters.menuLogoSvg=parameters.customLogoSvg}if(!parameters.singleConnectionMode&&parameters.singleClusterMode){parameters.singleConnectionMode=parameters.singleClusterMode}return new Customization(immutable_class_1.BaseImmutable.jsToValue(Customization.PROPERTIES,parameters))};Customization.prototype.getTitleWithVersion=function(version){return this.getTitle().replace(/%v/g,version)};Customization.prototype.getIssueWithPass=function(pass){var myOpts=Object.assign({},Customization.DEFAULT_PASS_RULE_OPTIONS,this.getPassRuleOptions());owasp.config(myOpts);var result=owasp.test(pass);if(result.requiredTestErrors.length){return result.requiredTestErrors[0]}return null};Customization.prototype.getEffectiveTheme=function(){return theme_1.Theme.getEffectiveTheme(this.theme)};Customization.prototype.getPreferredTheme=function(preferredTheme){var myEffectiveTheme=this.getEffectiveTheme();if(this.individualThemes==="disable")return myEffectiveTheme;return theme_1.Theme.getEffectiveTheme(preferredTheme,myEffectiveTheme)};Customization.prototype.renameFilterOrSplit=function(){var _a=this,renameFilterTo=_a.renameFilterTo,renameSplitTo=_a.renameSplitTo;return Boolean(renameFilterTo||renameSplitTo)};Customization.SETTINGS_MODE_NORMAL="normal";Customization.SETTINGS_MODE_SUPPRESSED="suppressed";Customization.DEFAULT_TITLE="Visualize (%v)";Customization.DEFAULT_TIMEZONES=[new chronoshift_1.Timezone("America/Juneau"),new chronoshift_1.Timezone("America/Los_Angeles"),new chronoshift_1.Timezone("America/Yellowknife"),new chronoshift_1.Timezone("America/Phoenix"),new chronoshift_1.Timezone("America/Denver"),new chronoshift_1.Timezone("America/Mexico_City"),new chronoshift_1.Timezone("America/Chicago"),new chronoshift_1.Timezone("America/New_York"),new chronoshift_1.Timezone("America/Argentina/Buenos_Aires"),chronoshift_1.Timezone.UTC,new chronoshift_1.Timezone("Asia/Jerusalem"),new chronoshift_1.Timezone("Europe/Paris"),new chronoshift_1.Timezone("Asia/Kathmandu"),new chronoshift_1.Timezone("Asia/Hong_Kong"),new chronoshift_1.Timezone("Asia/Seoul"),new chronoshift_1.Timezone("Pacific/Guam")];Customization.DEFAULT_PASS_RULE_OPTIONS={allowPassphrases:true,maxLength:128,minLength:8,minPhraseLength:20,minOptionalTestsToPass:4};Customization.PROPERTIES=[{name:"title",defaultValue:Customization.DEFAULT_TITLE},{name:"theme",defaultValue:null,immutableClass:{fromJS:theme_1.Theme.fromNameOrJS},toJS:theme_1.Theme.toNameOrJS},{name:"homeLogoSvg",defaultValue:null},{name:"menuLogoSvg",defaultValue:null},{name:"timezones",defaultValue:Customization.DEFAULT_TIMEZONES,immutableClassArray:chronoshift_1.Timezone},{name:"logoutHref",defaultValue:null},{name:"launcherHref",defaultValue:null},{name:"linkViewMode",defaultValue:false},{name:"singleConnectionMode",defaultValue:false},{name:"passRuleOptions",defaultValue:Customization.DEFAULT_PASS_RULE_OPTIONS,equal:function(a,b){return JSON.stringify(a)===JSON.stringify(b)}},{name:"settingsMode",defaultValue:Customization.SETTINGS_MODE_NORMAL},{name:"clientMonitor",defaultValue:"allow"},{name:"renameFilterTo",defaultValue:null},{name:"renameSplitTo",defaultValue:null},{name:"rawDataLimit",defaultValue:100},{name:"splitLimits",defaultValue:null,type:immutable_class_1.PropertyType.ARRAY},{name:"individualThemes",defaultValue:"allow"}];return Customization}(immutable_class_1.BaseImmutable);exports.Customization=Customization;immutable_class_1.BaseImmutable.finalize(Customization);Customization.BLANK=Customization.fromJS({});