"use strict";Object.defineProperty(exports,"__esModule",{value:true});var chai_1=require("chai");var immutable_class_tester_1=require("immutable-class-tester");var column_definition_1=require("./column-definition");describe("Column definition",function(){it("is an immutable class",function(){immutable_class_tester_1.testImmutableClass(column_definition_1.ColumnDefinition,[{name:"commentLength",nameInData:"commentLength",type:"long"},{name:"__time",nameInData:"column4",specialTime:true},{name:"average",nameInData:"column5",rollupType:"metric"}])});describe("metrics stuff",function(){var generatedSpec1={type:"approxHistogram",name:"delta_hist",fieldName:"delta",resolution:50,numBuckets:7,lowerLimit:"-Infinity",upperLimit:"Infinity"};var spec1JS={aggregation:{lowerLimit:"-Infinity",numBuckets:7,resolution:50,type:"approxHistogram",upperLimit:"Infinity"},name:"delta_hist",nameInData:"delta",rollupType:"metric"};var generatedSpec2={type:"hyperUnique",name:"user_unique",fieldName:"user",isInputHyperUnique:false};var spec2JS={aggregation:{type:"hyperUnique"},name:"user_unique",nameInData:"user",rollupType:"metric"};var generatedSpec3={type:"doubleSum",name:"delta",fieldName:"delta"};var spec3JS={aggregation:{type:"doubleSum"},name:"delta",nameInData:"delta",rollupType:"metric"};it("from metric spec",function(){chai_1.expect(column_definition_1.ColumnDefinition.fromMetricSpec(generatedSpec1).toJS()).to.deep.equal(spec1JS);chai_1.expect(column_definition_1.ColumnDefinition.fromMetricSpec(generatedSpec2).toJS()).to.deep.equal(spec2JS);chai_1.expect(column_definition_1.ColumnDefinition.fromMetricSpec(generatedSpec3).toJS()).to.deep.equal(spec3JS)});it("to metric spec",function(){chai_1.expect(column_definition_1.ColumnDefinition.fromJS(spec1JS).toMetricSpec(null)).to.deep.equal(generatedSpec1)})})});