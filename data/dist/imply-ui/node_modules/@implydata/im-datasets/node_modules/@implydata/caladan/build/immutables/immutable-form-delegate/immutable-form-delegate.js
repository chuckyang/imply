"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ImmutableFormDelegate=function(){function t(t){var e=this;this.updateErrors=function(t,r,a){var s=e.form.state.errors;s[t]=r?false:a;var o=true;for(var n in s)o=o&&s[n]===false;return{errors:s,canSave:o}};this.onChange=function(t,r,a,s){var o=e.updateErrors(a,r,s),n=o.errors,i=o.canSave;if(r){e.setState({errors:n,newInstance:t,canSave:i},e.callListeners.bind(e,t,r,a,s))}else{e.setState({errors:n,canSave:false},e.callListeners.bind(e,t,r,a,s))}};this.form=t;if(!this.form.state)this.form.state={};this.form.state.canSave=false;this.form.state.errors={};this.callbacks={}}t.prototype.on=function(t,e){var r=this.callbacks[t]||[];r.push(e);this.callbacks[t]=r};t.prototype.onAnyChange=function(t){this.on("*",t)};t.prototype.setState=function(t,e){return this.form.setState.call(this.form,t,e)};t.prototype.callListeners=function(t,e,r,a){var s=this.callbacks[r]||[];var o=this.callbacks["*"]||[];var n=s.concat(o);n.forEach(function(s){return s(t,e,r,a)})};return t}();exports.ImmutableFormDelegate=ImmutableFormDelegate;