"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var React=require("react");var beltful_1=require("@implydata/beltful");var resize_handle_1=require("../resize-handle/resize-handle");var Halves=function(e){tslib_1.__extends(t,e);function t(){var t=e.call(this)||this;t.state={};return t}t.prototype.getStoredValue=function(e){if(!e)return t.DEFAULT_VALUES;var r=beltful_1.LocalStorage.get(e);if(!r)return t.DEFAULT_VALUES;return Object.assign({},t.DEFAULT_VALUES,r)};t.prototype.initFromProps=function(e){var t=this.state.storedValues;var r={};var o=false;if(!t){r.storedValues=this.getStoredValue(e.localStorageId);o=true}if(o)this.setState(r)};t.prototype.componentWillMount=function(){this.initFromProps(this.props)};t.prototype.componentWillReceiveProps=function(e){this.initFromProps(e)};t.prototype.renderTop=function(){var e=this.props.top;var t=this.state.storedValues;if(!e)return null;var r={height:t.top+"%"};return React.createElement("div",{className:"top-part",style:r},e)};t.prototype.renderBottom=function(){var e=this.props.bottom;var t=this.state.storedValues;if(!e)return null;var r={height:t.bottom+"%"};return React.createElement("div",{className:"bottom-part",style:r},e)};t.prototype.onTopResize=function(e){var t=this.props.localStorageId;var r=this.state.storedValues;r.top=e;r.bottom=100-e;this.setState({storedValues:r});beltful_1.LocalStorage.set(t,r)};t.prototype.renderHandle=function(){var e=this;var t=this.props.onResizeEnd;var r=this.state.storedValues;return React.createElement(resize_handle_1.ResizeHandle,{side:"top",hideIcon:true,initialValue:r.top,onResize:function(t){return e.onTopResize(t)},onResizeEnd:t,min:20,max:80,mode:"percentage"})};t.prototype.render=function(){var e=this.props,t=e.top,r=e.bottom;var o=this.state;return React.createElement("div",{className:"halves"},this.renderTop(),this.renderHandle(),this.renderBottom())};t.DEFAULT_VALUES={top:50,bottom:50};return t}(React.Component);exports.Halves=Halves;