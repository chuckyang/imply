"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var React=require("react");var classNames=require("classnames");var immutable_class_1=require("immutable-class");var strings_1=require("../../strings");var button_1=require("../button/button");var checkbox_1=require("../checkbox/checkbox");var SuggestionsList=function(e){tslib_1.__extends(t,e);function t(){var t=e.call(this)||this;t.selectNone=function(){var e=t.props.onChange;e([])};t.selectAll=function(){var e=t.props,s=e.onChange,r=e.items;s(r)};t.toggle=function(e,s){var r=t.props,n=r.onChange,i=r.items,a=r.selectedItems;var c=t.state.selectedIndices;var o=c.concat();o[s]=!o[s];var l=o.map(function(e,t){return e?i[t]:null}).filter(Boolean);n(l)};t.state={selectedIndices:[]};return t}t.specialize=function(){return t};t.prototype.initFromProps=function(e){if(!e.items||!e.selectedItems)return;var t=[];e.items.forEach(function(s,r){e.selectedItems.forEach(function(n){if(e.equals(s,n))t[r]=true})});this.setState({selectedIndices:t})};t.prototype.componentWillMount=function(){this.initFromProps(this.props)};t.prototype.componentWillReceiveProps=function(e){this.initFromProps(e)};t.prototype.renderEmpty=function(){return React.createElement("div",{className:"suggestions-list"},React.createElement("div",{className:"items"},React.createElement("div",{className:"message"},strings_1.STRINGS.thereAreNoSuggestionsAtTheMoment)))};t.prototype.renderItems=function(){var e=this;var t=this.props,s=t.items,r=t.selectedItems,n=t.labelizeItem,i=t.isItemDisabled;var a=this.state.selectedIndices;return s.map(function(t,s){var r=i?i(t):false;return React.createElement("div",{className:classNames("row",{disabled:r}),key:s,onClick:function(){return r?null:e.toggle(t,s)}},React.createElement(checkbox_1.Checkbox,{disabled:r,label:n(t),selected:a[s]}))})};t.prototype.render=function(){var e=this.props,t=e.items,s=e.hideButtons;if(!t||!t.length)return this.renderEmpty();return React.createElement("div",{className:"suggestions-list"},s===true?null:React.createElement("div",{className:"buttons"},React.createElement(button_1.Button,{type:"light",onClick:this.selectAll,title:strings_1.STRINGS.selectAll}),React.createElement(button_1.Button,{type:"light",onClick:this.selectNone,title:strings_1.STRINGS.selectNone})),React.createElement("div",{className:"items"},this.renderItems()))};t.defaultProps={equals:immutable_class_1.generalEqual};return t}(React.Component);exports.SuggestionsList=SuggestionsList;