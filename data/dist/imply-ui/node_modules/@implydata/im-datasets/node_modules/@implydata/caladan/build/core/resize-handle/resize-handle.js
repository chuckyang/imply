"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var beltful_1=require("@implydata/beltful");var little_pictures_1=require("@implydata/little-pictures");var React=require("react");var svg_icon_1=require("../svg-icon/svg-icon");var ResizeHandle=function(e){tslib_1.__extends(t,e);function t(){var t=e.call(this)||this;t.onMouseDown=function(e){window.addEventListener("mouseup",t.onGlobalMouseUp);window.addEventListener("mousemove",t.onGlobalMouseMove);var o;if(t.isHorizontal()){o=beltful_1.EventUtils.getXFromEvent(e)}else{o=beltful_1.EventUtils.getYFromEvent(e)}t.setState({anchor:o});e.preventDefault()};t.onGlobalMouseMove=function(e){var o=t.props,n=o.side,r=o.mode;var i=t.state,s=i.startValue,a=i.anchor;var l=t.isHorizontal()?beltful_1.EventUtils.getXFromEvent(e)-a:beltful_1.EventUtils.getYFromEvent(e)-a;if(n==="left"||n==="top")l=-l;if(r==="percentage"){var u=t._div.parentElement.getBoundingClientRect().height;l=l*100/u}var p=t.constrainValue(s-l);t.setState({currentValue:p},function(){if(!!t.props.onResize)t.props.onResize(p)})};t.onGlobalMouseUp=function(e){window.removeEventListener("mouseup",t.onGlobalMouseUp);window.removeEventListener("mousemove",t.onGlobalMouseMove);var o=t.state.currentValue;t.setState({startValue:o},function(){if(!!t.props.onResizeEnd)t.props.onResizeEnd(o)})};t.state={};return t}t.prototype.componentWillMount=function(){this.setState({startValue:this.props.initialValue,currentValue:this.props.initialValue})};t.prototype.isHorizontal=function(){var e=this.props.side;return e==="left"||e==="right"};t.prototype.constrainValue=function(e){var t=this.props,o=t.min,n=t.max;return beltful_1.NumberUtils.clamp(e,this.props.min,this.props.max)};t.prototype.render=function(){var e=this;var t=this.props,o=t.side,n=t.mode,r=t.hideIcon;var i=this.state.currentValue;var s={};s[o]=i+(n==="percentage"?"%":"px");var a="resize-handle "+o;return React.createElement("div",{className:a,ref:function(t){return e._div=t},style:s,onMouseDown:this.onMouseDown},r?null:React.createElement(svg_icon_1.SvgIcon,{className:o,svg:this.isHorizontal()?little_pictures_1.DRAG_HANDLE_VERTICAL:little_pictures_1.DRAG_HANDLE_HORIZONTAL}))};t.defaultProps={mode:"absolute"};return t}(React.Component);exports.ResizeHandle=ResizeHandle;