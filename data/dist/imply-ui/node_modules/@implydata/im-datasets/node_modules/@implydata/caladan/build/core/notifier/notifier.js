"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Notifier=function(){function e(){}e.create=function(i){i.id=e.counter++;e.notifications.push(i);e.callListeners();return i.id};e.callListeners=function(){e.listeners.forEach(function(i){return i(e.notifications,e.question)})};e.info=function(i,n){e.create({title:i,message:n,priority:"info"})};e.failure=function(i,n){e.create({title:i,message:n,priority:"failure"})};e.success=function(i,n){e.create({title:i,priority:"success",action:n})};e.subscribe=function(i){e.listeners.push(i)};e.stick=function(i){return e.create({title:i,priority:"info",muted:true})};e.removeSticker=function(i){var n;var t=-1;e.notifications.forEach(function(e,r){if(e.id===i){n=e;t=r}});if(!n){console.warn("Trying to remove a non existing sticker");return}n.discarded=true;e.notifications[t]=n;e.callListeners()};e.ask=function(i){if(e.question)throw new Error("There is already a pending question");e.question=i;e.callListeners()};e.removeQuestion=function(){if(!e.question)return;e.question=undefined;e.callListeners()};e.clear=function(){this.notifications.forEach(function(e){return e.discarded=true});e.callListeners()};e.removeNotification=function(i){var n=e.notifications.indexOf(i);if(n===-1){throw new Error("Trying to remove an unknown notification")}e.notifications.splice(n,1);e.callListeners()};e.unsubscribe=function(i){var n=e.listeners.indexOf(i);if(n===-1){throw new Error("Trying to unsubscribe something that never subscribed")}e.listeners.splice(n,1)};e.handleRemoval=function(i,n,t){e.ask({title:"Remove this "+i,message:['Are you sure you would like to delete "'+t+'"?',"This action is not reversible."],choices:[{label:"Cancel",closeOnClick:true,type:"secondary"},{label:"Delete",closeOnClick:true,callback:n,type:"warn"}],onClose:e.removeQuestion})};e.counter=0;e.notifications=[];e.question=null;e.listeners=[];return e}();exports.Notifier=Notifier;