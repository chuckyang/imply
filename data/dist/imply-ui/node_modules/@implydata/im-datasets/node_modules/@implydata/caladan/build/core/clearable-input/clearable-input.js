"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var little_pictures_1=require("@implydata/little-pictures");var classNames=require("classnames");var React=require("react");var global_event_listener_1=require("../global-event-listener/global-event-listener");var svg_icon_1=require("../svg-icon/svg-icon");var text_input_1=require("../text-input/text-input");var button_1=require("../button/button");function focusOnInput(e){if(!e)return;e.focus()}var ClearableInput=function(e){tslib_1.__extends(t,e);function t(){var t=e.call(this)||this;t.onClear=function(){var e=t.props,n=e.onClear,r=e.onChange;r("");if(n)n()};t.onEscape=function(){var e=t.props,n=e.value,r=e.onClear,a=e.onChange;if(n){a("")}else if(r){r()}};return t}t.prototype.onChange=function(e){this.props.onChange(e.target.value)};t.prototype.render=function(){var e=this;var t=this.props,n=t.className,r=t.type,a=t.placeholder,l=t.focusOnMount,o=t.value,s=t.onBlur,u=t.leftSvg;var i=l?focusOnInput:null;var c={empty:!o,"has-left-icon":!!u};return React.createElement("div",{className:classNames("clearable-input",c,n)},React.createElement(global_event_listener_1.GlobalEventListener,{escape:this.onEscape}),u?React.createElement(svg_icon_1.SvgIcon,{svg:u,className:"left-icon"}):null,React.createElement(text_input_1.TextInput,{type:r||"text",placeholder:a,value:o||"",onChange:function(t){return e.onChange(t)},onBlur:s,ref:i}),o?React.createElement(button_1.Button,{className:"clear-button",type:"gray",svg:little_pictures_1.X,onClick:this.onClear}):null)};return t}(React.Component);exports.ClearableInput=ClearableInput;